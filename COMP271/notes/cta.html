<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The CTA Class &mdash; Leo Irakliotis&#39; courses  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="COMP 363 Design and Analysis of Computer Algorithms" href="../../COMP363/introduction.html" />
    <link rel="prev" title="JFK Jr.’s Last Flight and What We Learnt From It" href="jfk.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Leo Irakliotis' courses
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Courses</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../COMP141/introduction.html">COMP 141 Introduction to Computing Tools and Techniques</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../COMP163/introduction.html">COMP 163 Discrete Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../COMP170/introduction.html">COMP 170 Introduction to Java Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../COMP180/introduction.html">COMP 180 Data Analysis for the Sciences</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../introduction.html">COMP 271 Data Structures</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../shared/COVID19.html">Course operations and COVID19</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../shared/COVID19.html#recordings">Recordings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../organization.html">Course organization and logistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../organization.html#course-outline">Course outline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../organization.html#ground-rules">Ground rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../organization.html#deadlines">Deadlines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../organization.html#student-hours-aka-office-hours">Student hours (aka office hours)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../organization.html#academic-integrity">Academic integrity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../organization.html#professionalism">Professionalism</a></li>
<li class="toctree-l2"><a class="reference internal" href="../organization.html#zoom">Zoom</a></li>
<li class="toctree-l2"><a class="reference internal" href="../organization.html#formal-notices">Formal notices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../organization.html#inclusion-statement">Inclusion statement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reading.html">Reading material</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../notes.html">Leo's notes</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="checklist.html">Checklist prior to starting COMP271</a></li>
<li class="toctree-l3"><a class="reference internal" href="csbs.html">Getting Started With Code Step By Step</a></li>
<li class="toctree-l3"><a class="reference internal" href="jfk.html">JFK Jr.'s Last Flight and What We Learnt From It</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">The CTA Class</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#implement-an-interface">Implement an interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="#help-is-always-given-to-those-who-ask-for-it">Help is always given to those who ask for it</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-distance-method">The <code class="docutils literal notranslate"><span class="pre">distance</span></code> method</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../COMP363/introduction.html">COMP 363 Design and Analysis of Computer Algorithms</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Projects</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../DEI/DEI.html">DEI initiative</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../DBD/introduction.html">Databases Design</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Misc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../LeoIrakliotis.html">Shameless self-promotion</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Leo Irakliotis' courses</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../introduction.html">COMP 271 Data Structures</a> &raquo;</li>
          <li><a href="../notes.html">Leo’s notes</a> &raquo;</li>
      <li>The CTA Class</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/COMP271/notes/cta.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="the-cta-class">
<h1>The CTA Class<a class="headerlink" href="#the-cta-class" title="Permalink to this headline"></a></h1>
<p><a class="reference external" href="https://github.com/lgreco/DataStructures/tree/master/LabSessions/The%20CTA/src">The CTA class</a> is a nice playground to explore interfaces and inheritance. The class is based on data about the train and bus services offered by the Chicago Transit Authority. The data are available from the city’s data portal. This example requires some familiarity with CTA train and bus routes, so if you are not a Chicago resident you may want to open a map!</p>
<p>We begin with a simple model: one superclass for locations, extended by two class one for train stations and one for bus stops. The class diagram is shown below.</p>
<figure class="align-default">
<img alt="../../_images/TheCTA.png" src="../../_images/TheCTA.png" />
</figure>
<p>The next step is to expand class <code class="docutils literal notranslate"><span class="pre">CTALocation</span></code> with two more fields:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">private</span> <span class="kt">double</span> <span class="n">latitude</span><span class="o">,</span> <span class="n">longitude</span><span class="o">;</span>
</pre></div>
</div>
<p>that capture the geographic coordinates of a location. These coordinates are part of a CSV file with station information that is <a class="reference external" href="https://data.cityofchicago.org/Transportation/CTA-System-Information-List-of-L-Stops/8pix-ypme">available from the Chicago Data Portal</a>. This expansion may necessitate a new constructor for the class:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="nf">CTALocation</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="kt">double</span> <span class="n">latitude</span><span class="o">,</span> <span class="kt">double</span> <span class="n">longitude</span><span class="o">)</span> <span class="o">{</span>
<span class="hll">    <span class="k">this</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
</span>    <span class="k">this</span><span class="o">.</span><span class="na">latitude</span> <span class="o">=</span> <span class="n">latitude</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">longitude</span> <span class="o">=</span> <span class="n">longitude</span><span class="o">;</span>
 <span class="o">}</span>
</pre></div>
</div>
<p>The highlighted line above is a call to the class’s basic constructor. Once that basic constructor initializes the object, the constructor above assigns values to the <code class="docutils literal notranslate"><span class="pre">latitude</span></code> and <code class="docutils literal notranslate"><span class="pre">longitude</span></code> fields.</p>
<section id="implement-an-interface">
<h2>Implement an interface<a class="headerlink" href="#implement-an-interface" title="Permalink to this headline"></a></h2>
<p>The next step in this mini-project was to implement the <code class="docutils literal notranslate"><span class="pre">Comparable</span></code> interface in <code class="docutils literal notranslate"><span class="pre">CTALocation</span></code>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CTALocation</span> <span class="kd">implements</span> <span class="n">Comparable</span><span class="o">&lt;</span><span class="n">CTALocation</span><span class="o">&gt;</span> <span class="o">{...}</span>
</pre></div>
</div>
<p>When a class <strong>implements</strong> an interface, it promises to include the behavior outlined in the interface. The interface is really a list of method signatures. The implementation of these methods is left to the programmer. The interface (should) provide extensive commentary for each method signature it contains, communicating to programmers how to best implement the methods.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Comparable</span></code> interface, for example, <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/lang/Comparable.html#compareTo-T-">lists only one method</a>. The documentation for that method is sufficient to help a developer write suitable code. We know that the method must return a negative integer number if the invoking object (<code class="docutils literal notranslate"><span class="pre">this</span></code>) is less than the passed object; zero if they are equal, and; a positive integer is the invoking object is greater. Based on this information we can set up a skeleton method and complete it step-by-step.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kt">int</span> <span class="nf">compareTo</span><span class="o">(</span><span class="n">CTALocation</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">double</span> <span class="n">thisDistance</span> <span class="o">=</span> <span class="n">distance</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">latitude</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">longitude</span><span class="o">,</span> <span class="o">...);</span>
    <span class="kt">double</span> <span class="n">otherDistance</span> <span class="o">=</span>  <span class="n">distance</span><span class="o">(</span><span class="n">other</span><span class="o">.</span><span class="na">latitude</span><span class="o">,</span> <span class="n">other</span><span class="o">.</span><span class="na">longitude</span><span class="o">,</span> <span class="o">...);</span>
<span class="hll">    <span class="k">return</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="o">(</span><span class="n">thisDistance</span><span class="o">-</span><span class="n">otherDistance</span><span class="o">);</span>
</span><span class="o">}</span>
</pre></div>
</div>
<p>We don’t know yet how method <code class="docutils literal notranslate"><span class="pre">distance</span></code>, shown above, works but we can assume that it returns the distance between downtown Chicago and a location specified by latitude and longitude. The important thing is the return line above. Consider the following invocation of the method:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="n">ohare</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">western</span><span class="o">);</span>
</pre></div>
</div>
<p>and assume that <code class="docutils literal notranslate"><span class="pre">ohare</span></code> and <code class="docutils literal notranslate"><span class="pre">western</span></code> are <code class="docutils literal notranslate"><span class="pre">CTALocation</span></code> objects for the CTA stations at O’Hare airport and on Western (and Lawrence) avenue. Intuitively, we know that O’Hare is further away from downtown that Western. Indeed, the O’Hare station is about 15.5 miles from downtown; the Western station, 6.5 miles. We can verify these distances with a tool like Google Earth. Based on that, we expect variable <code class="docutils literal notranslate"><span class="pre">x</span></code> above to be positive, with a value of <code class="docutils literal notranslate"><span class="pre">8</span></code> or <code class="docutils literal notranslate"><span class="pre">9</span></code>, depending on the exact distances and their difference.</p>
</section>
<section id="help-is-always-given-to-those-who-ask-for-it">
<h2>Help is always given to those who ask for it<a class="headerlink" href="#help-is-always-given-to-those-who-ask-for-it" title="Permalink to this headline"></a></h2>
<p>All that remains is the method that computes the distance from downtown. At this point the programming becomes highly specialized and we must ask for help. <em>Help is always given at Loyola to those who ask for it.</em> The <code class="docutils literal notranslate"><span class="pre">distance</span></code> method is shown in the next section. It computes the distance between any two points on earth, specified by the respective latitudes and longitudes. We need to compute distances from downtown, so we can <strong>overload</strong> the method as follows.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">static</span> <span class="kt">double</span> <span class="nf">distance</span><span class="o">(</span><span class="kt">double</span> <span class="n">lat</span><span class="o">,</span> <span class="kt">double</span> <span class="n">lon</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="kt">double</span> <span class="n">MADISON_STATE_LAT</span> <span class="o">=</span> <span class="mf">41.882067</span><span class="o">;</span>
    <span class="kd">final</span> <span class="kt">double</span> <span class="n">MADISON_STATE_LON</span> <span class="o">=</span> <span class="o">-</span><span class="mf">87.6283605</span><span class="o">;</span>
    <span class="k">return</span> <span class="n">distance</span><span class="o">(</span><span class="n">lat</span><span class="o">,</span> <span class="n">lon</span><span class="o">,</span> <span class="n">MADISON_STATE_LAT</span><span class="o">,</span> <span class="n">MADISON_STATE_LON</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Alternatively, we can overload <code class="docutils literal notranslate"><span class="pre">distance</span></code> by passing a <cite>CTALocation</cite> object and let the method pull the date, as follows:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">static</span> <span class="kt">double</span> <span class="nf">distance</span><span class="o">(</span><span class="n">CTALocation</span> <span class="n">ctaLocation</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="kt">double</span> <span class="n">MADISON_STATE_LAT</span> <span class="o">=</span> <span class="mf">41.882067</span><span class="o">;</span>
    <span class="kd">final</span> <span class="kt">double</span> <span class="n">MADISON_STATE_LON</span> <span class="o">=</span> <span class="o">-</span><span class="mf">87.6283605</span><span class="o">;</span>
    <span class="k">return</span> <span class="n">distance</span><span class="o">(</span><span class="n">ctaLocation</span><span class="o">.</span><span class="na">latitude</span><span class="o">,</span> <span class="n">ctaLocation</span><span class="o">.</span><span class="na">longitude</span><span class="o">,</span>
        <span class="n">MADISON_STATE_LAT</span><span class="o">,</span> <span class="n">MADISON_STATE_LON</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Of course, we can skip overloading altogether by writing the Madison and State coordinates as <code class="docutils literal notranslate"><span class="pre">private</span></code>, <code class="docutils literal notranslate"><span class="pre">static</span></code>, <code class="docutils literal notranslate"><span class="pre">final</span></code> variables in class <code class="docutils literal notranslate"><span class="pre">CTALocation</span></code>, and then invoke <code class="docutils literal notranslate"><span class="pre">distance</span></code> in method <code class="docutils literal notranslate"><span class="pre">compareTo</span></code> as follows.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kt">int</span> <span class="nf">compareTo</span><span class="o">(</span><span class="n">CTALocation</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">double</span> <span class="n">thisDistance</span> <span class="o">=</span> <span class="n">distance</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">latitude</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">longitude</span><span class="o">,</span>
        <span class="n">MADISON_STATE_LAT</span><span class="o">,</span> <span class="n">MADISON_STATE_LON</span><span class="o">);</span>
    <span class="kt">double</span> <span class="n">otherDistance</span> <span class="o">=</span>  <span class="n">distance</span><span class="o">(</span><span class="n">other</span><span class="o">.</span><span class="na">latitude</span><span class="o">,</span> <span class="n">other</span><span class="o">.</span><span class="na">longitude</span>
        <span class="n">MADISON_STATE_LAT</span><span class="o">,</span> <span class="n">MADISON_STATE_LON</span><span class="o">);</span>
    <span class="k">return</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="o">(</span><span class="n">thisDistance</span><span class="o">-</span><span class="n">otherDistance</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</div>
</section>
<section id="the-distance-method">
<h2>The <code class="docutils literal notranslate"><span class="pre">distance</span></code> method<a class="headerlink" href="#the-distance-method" title="Permalink to this headline"></a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="lineno"> 1 </span> <span class="cm">/**</span>
<span class="lineno"> 2 </span><span class="cm">  * Compute Great Circle distance between two points on Earth.</span>
<span class="lineno"> 3 </span><span class="cm">  *</span>
<span class="lineno"> 4 </span><span class="cm">  * Usage:</span>
<span class="lineno"> 5 </span><span class="cm">  *</span>
<span class="lineno"> 6 </span><span class="cm">  *         double dist = distance(lat1, lon1, lat2, lon2)</span>
<span class="lineno"> 7 </span><span class="cm">  *                                ----------  ----------</span>
<span class="lineno"> 8 </span><span class="cm">  *                                     |           |</span>
<span class="lineno"> 9 </span><span class="cm">  *                                     |           Geographic coordinates</span>
<span class="lineno">10 </span><span class="cm">  *                                     |           of second point, in degrees</span>
<span class="lineno">11 </span><span class="cm">  *                                     |           of latitude and longitude.</span>
<span class="lineno">12 </span><span class="cm">  *                                     |</span>
<span class="lineno">13 </span><span class="cm">  *                                     Geographic coordinates</span>
<span class="lineno">14 </span><span class="cm">  *                                     of first point, in degrees</span>
<span class="lineno">15 </span><span class="cm">  *                                     of latitude and longitude.</span>
<span class="lineno">16 </span><span class="cm">  *</span>
<span class="lineno">17 </span><span class="cm">  * Based on the haversine formula (https://en.wikipedia.org/wiki/Haversine_formula):</span>
<span class="lineno">18 </span><span class="cm">  *</span>
<span class="lineno">19 </span><span class="cm">  * d = 2 * r * arcsin(sqrt(</span>
<span class="lineno">20 </span><span class="cm">  *                         hav(lat2-lat1) +</span>
<span class="lineno">21 </span><span class="cm">  *                         cos(lat1)*cos(lat2)*hav(lon2-lon1)</span>
<span class="lineno">22 </span><span class="cm">  *                         ))</span>
<span class="lineno">23 </span><span class="cm">  *</span>
<span class="lineno">24 </span><span class="cm">  * where hav is the haversine function, hav(x) = sin^2(x/2).</span>
<span class="lineno">25 </span><span class="cm">  *</span>
<span class="lineno">26 </span><span class="cm">  * The computed distance is subject to slight numerical errors because (a) the formula</span>
<span class="lineno">27 </span><span class="cm">  * assumes that Earth is a sphere, when it is not, and; (b) Math&#39;s toRadians is prone</span>
<span class="lineno">28 </span><span class="cm">  * to rounding errors.</span>
<span class="lineno">29 </span><span class="cm">  *</span>
<span class="lineno">30 </span><span class="cm">  * @param lat1 Latitude of first point</span>
<span class="lineno">31 </span><span class="cm">  * @param lon1 Longitude of first point</span>
<span class="lineno">32 </span><span class="cm">  * @param lat2 Latitude of second point</span>
<span class="lineno">33 </span><span class="cm">  * @param lon2 Longitude of second point</span>
<span class="lineno">34 </span><span class="cm">  * @return distance between two points</span>
<span class="lineno">35 </span><span class="cm">  */</span>
<span class="lineno">36 </span> <span class="kd">static</span> <span class="kt">double</span> <span class="nf">distance</span><span class="o">(</span><span class="kt">double</span> <span class="n">lat1</span><span class="o">,</span> <span class="kt">double</span> <span class="n">lon1</span><span class="o">,</span> <span class="kt">double</span> <span class="n">lat2</span><span class="o">,</span> <span class="kt">double</span> <span class="n">lon2</span><span class="o">)</span> <span class="o">{</span>
<span class="lineno">37 </span>
<span class="lineno">38 </span>     <span class="c1">// Radius of earth, in miles. Use 6371 to compute in kilometers.</span>
<span class="lineno">39 </span>     <span class="kd">final</span> <span class="kt">double</span> <span class="n">EARTH_RADIUS</span> <span class="o">=</span> <span class="mf">3958.8</span><span class="o">;</span>
<span class="lineno">40 </span>
<span class="lineno">41 </span>     <span class="cm">/*</span>
<span class="lineno">42 </span><span class="cm">     Convert latitudes to radians (the unit used by Math&#39;s trig functions). No such conversion</span>
<span class="lineno">43 </span><span class="cm">     is needed for the longitude values because they are not used individually in a trigonometric</span>
<span class="lineno">44 </span><span class="cm">     function. Instead, convert their different to radians to use in the second hav() function.</span>
<span class="lineno">45 </span><span class="cm">      */</span>
<span class="lineno">46 </span>     <span class="n">lat1</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">toRadians</span><span class="o">(</span><span class="n">lat1</span><span class="o">);</span>
<span class="lineno">47 </span>     <span class="n">lat2</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">toRadians</span><span class="o">(</span><span class="n">lat2</span><span class="o">);</span>
<span class="lineno">48 </span>
<span class="lineno">49 </span>     <span class="c1">// Latitude difference for hav function (they are already in radians)</span>
<span class="lineno">50 </span>     <span class="kt">double</span> <span class="n">deltaLatitude</span> <span class="o">=</span> <span class="n">lat2</span><span class="o">-</span><span class="n">lat1</span><span class="o">;</span>
<span class="lineno">51 </span>     <span class="c1">// Longitude difference for hav function (converted to radians)</span>
<span class="lineno">52 </span>     <span class="kt">double</span> <span class="n">deltaLongitude</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">toRadians</span><span class="o">(</span><span class="n">lon2</span> <span class="o">-</span> <span class="n">lon1</span><span class="o">);</span>
<span class="lineno">53 </span>
<span class="lineno">54 </span>     <span class="cm">/*</span>
<span class="lineno">55 </span><span class="cm">     Build haversine formula step-by-step, for clarity. First compute the haversine functions</span>
<span class="lineno">56 </span><span class="cm">     for latitude and longitude using the substitution hav(x) = sin^2(x/2). Next, assemble the</span>
<span class="lineno">57 </span><span class="cm">     trig expression that goes the square root. And finally build the formula.</span>
<span class="lineno">58 </span><span class="cm">      */</span>
<span class="lineno">59 </span>
<span class="lineno">60 </span>     <span class="kt">double</span> <span class="n">latHav</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">pow</span><span class="o">(</span><span class="n">Math</span><span class="o">.</span><span class="na">sin</span><span class="o">(</span><span class="n">deltaLatitude</span><span class="o">/</span><span class="mf">2.0</span><span class="o">),</span> <span class="mf">2.0</span><span class="o">);</span>
<span class="lineno">61 </span>     <span class="kt">double</span> <span class="n">lonHav</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">pow</span><span class="o">(</span><span class="n">Math</span><span class="o">.</span><span class="na">sin</span><span class="o">(</span><span class="n">deltaLongitude</span><span class="o">/</span><span class="mf">2.0</span><span class="o">),</span> <span class="mf">2.0</span><span class="o">);</span>
<span class="lineno">62 </span>     <span class="kt">double</span> <span class="n">cosines</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">cos</span><span class="o">(</span><span class="n">lat1</span><span class="o">)*</span><span class="n">Math</span><span class="o">.</span><span class="na">cos</span><span class="o">(</span><span class="n">lat2</span><span class="o">);</span>
<span class="lineno">63 </span>     <span class="kt">double</span> <span class="n">underRoot</span> <span class="o">=</span> <span class="n">latHav</span> <span class="o">+</span> <span class="n">cosines</span><span class="o">*</span><span class="n">lonHav</span><span class="o">;</span>
<span class="lineno">64 </span>
<span class="lineno">65 </span>     <span class="c1">// Return value, assigned negative in case we fail to compute formula</span>
<span class="lineno">66 </span>     <span class="kt">double</span> <span class="n">d</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span><span class="o">;</span>
<span class="lineno">67 </span>     <span class="k">if</span> <span class="o">(</span><span class="n">underRoot</span> <span class="o">&gt;=</span> <span class="mf">0.0</span><span class="o">)</span>
<span class="lineno">68 </span>         <span class="n">d</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">EARTH_RADIUS</span> <span class="o">*</span> <span class="n">Math</span><span class="o">.</span><span class="na">asin</span><span class="o">(</span><span class="n">Math</span><span class="o">.</span><span class="na">sqrt</span><span class="o">(</span><span class="n">underRoot</span><span class="o">));</span>
<span class="lineno">69 </span>     <span class="k">return</span> <span class="n">d</span><span class="o">;</span>
<span class="lineno">70 </span> <span class="o">}</span> <span class="c1">// method distance</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="jfk.html" class="btn btn-neutral float-left" title="JFK Jr.’s Last Flight and What We Learnt From It" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../COMP363/introduction.html" class="btn btn-neutral float-right" title="COMP 363 Design and Analysis of Computer Algorithms" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019-2021, Leo Irakliotis.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>